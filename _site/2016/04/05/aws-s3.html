<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- FB -->
  	<meta property="og:title" content="..." />
  	<meta property="og:site_name" content="..."/>
  	<meta property="og:url" content="http://..." />
  	<meta property="og:description" content="..." />
  	<meta property="og:type" content="article" />
  	<meta property="og:image" content="http://..." />
  	<meta property="og:image:type" content="/images/jpeg" />
  	<meta property="og:image:width" content="1200" />
  	<meta property="og:image:height" content="650" />

  	<!-- FB alt translations -->
  	<meta property="og:locale" content="en_US" />

    <title>
      
        AWS S3 Static
      
    </title>

    <!-- fav and touch -->
  	<link rel="shortcut icon" href="/images/favicon.ico">
  	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114-precomposed.png">
  	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72-precomposed.png">
  	<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-57-precomposed.png">

    <!-- CSS -->
    <link href="/css/libs/bootstrap.min.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
    <script src="/js/libs/bootstrap.min.js" type="text/javascript"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

  
<!-- Basic nav -->

<nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
  <div class="container">

    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">The name says it all</a>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/blog.html">Adventures in bullshit</a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->

  </div>
</nav>


  <div class="container push">
    <div class="row">

      <div class="col-sm-9">
        <h1 id="configure-a-static-site-through-aws-s3">Configure a static site through AWS S3</h1>

<hr />

<p>I heard you can host a static site on Amazon S3. Not only is this unnecessary and convoluted to adopt, but you have to go through and learn the special “Amazon way” of doing it. There are also super dense third party tools to automate this process because they want it to be infinitely more complicated.</p>

<p>It’s super cheap though. That is until you get a bill that says it isn’t. Doesn’t matter, since Amazon already has your credit card on file so you will pay either way.</p>

<p>The whole <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/HostingWebsiteOnS3Setup.html">sad state of affairs is here to read.</a></p>

<p>So let’s get going shall we?</p>

<p><br /></p>

<hr />

<h2 id="make-three-buckets">Make Three Buckets</h2>

<p>The site will need three instances. root, www, and logs. Create a bucket for each with the exact domain name.</p>

<p>For instance:</p>

<ul>
  <li>fucktheweb.com</li>
  <li>www.fucktheweb.com</li>
  <li>logs.fucktheweb.com</li>
</ul>

<p><br /></p>

<p>Enable the root site <em>fucktheweb.com</em> for web hosting. Go to the <strong>Properties</strong> panel, click <strong>Static Website Hosting</strong>, and do the following:</p>

<ol>
  <li>Select the <strong>Enable website hosting</strong>.</li>
  <li>In the <strong>Index Document</strong> box, add index.html.</li>
  <li>In the <strong>Error Document</strong> box, add 404.html.</li>
</ol>

<p><br /></p>

<h2 id="make-the-root-public">Make the root public</h2>

<p>In the <em>fucktheweb.com</em> bucket <strong>Properties</strong> panel, click the <strong>Permissions</strong>.</p>

<ol>
  <li>Click Add <strong>Bucket Policy</strong>.</li>
  <li>Drop this puppy in</li>
</ol>

<pre>
{
  "Version":"2012-10-17",
  "Statement":[{
	"Sid":"PublicReadForGetBucketObjects",
        "Effect":"Allow",
	  "Principal": "*",
      "Action":["s3:GetObject"],
      "Resource":["arn:aws:s3:::fucktheweb.com/*"
      ]
    }
  ]
}
</pre>

<p><br /></p>

<h2 id="set-up-the-redirect">Set up the redirect</h2>

<p>In the <em>www.fucktheweb.com</em> bucket <strong>Properties</strong> go to <strong>Static Website Hosting</strong>.</p>

<ol>
  <li>Select <strong>Redirect all requests to another host name</strong></li>
  <li><strong>Redirect all requests to:</strong> fucktheweb.com</li>
</ol>

<p><br /></p>

<h2 id="set-up-logging">Set up logging</h2>

<p>In the <em>logs.fucktheweb.com</em> bucket, create a folder named “root”.</p>

<p>In the <em>fucktheweb.com</em> bucket <strong>Properties</strong> panel, click <strong>Logging</strong>.</p>

<ol>
  <li>Check <strong>Enable logging</strong>.</li>
  <li><strong>Target bucket:</strong> logs.fucktheweb.com</li>
  <li><strong>Target prefix:</strong> root/</li>
</ol>

<hr />

<h1 id="point-the-domain">Point the domain</h1>

<p>Well, that was fun. Now we get to go through another super groovy interface that costs more money. It’s Amazon’s signature “Route 53” and we need to set up a “hosted zone”.</p>

      </div>

      <div class="col-sm-3">
        <h3>Failures</h3>
        <hr>
        <ul>
          
          <li>
            <a href="/2016/04/05/aws-s3.html">AWS S3 Static</a>
          </li>
          
          <li>
            <a href="/2016/04/04/markdown.html">Markdown / Kramdown</a>
          </li>
          
        </ul>
      </div>

    </div>
  </div>

  
<footer>

  <div class="container">
    <div class="row">
      <div class="col-sm-12">

      <hr>
      <p class="text-center">It's 2016 in case you live on the moon.</p>

      </div>
    </div>
  </div>

</footer><!-- footer -->


  <!-- JS -->
<script src="/js/navscroll.js" type="text/javascript"></script>
<script src="/js/libs/animate.js" type="text/javascript"></script>
<script src="/js/scripts.js" type="text/javascript"></script>
<script src="/js/libs/retina.min.js" type="text/javascript"></script>


</body>
