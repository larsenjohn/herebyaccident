<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Where all of the tragic happens. You should really turn back now.">
    <meta name="author" content="">

    <!-- FB -->
  	<meta property="og:title" content="..." />
  	<meta property="og:site_name" content="..."/>
  	<meta property="og:url" content="http://..." />
  	<meta property="og:description" content="..." />
  	<meta property="og:type" content="article" />
  	<meta property="og:image" content="http://..." />
  	<meta property="og:image:type" content="/images/jpeg" />
  	<meta property="og:image:width" content="1200" />
  	<meta property="og:image:height" content="650" />

  	<!-- FB alt translations -->
  	<meta property="og:locale" content="en_US" />

    <title>
      
        AWS S3 resource sharing
      
    </title>

    <!-- fav and touch -->
    <link rel="shortcut icon" type="image/png" href="/favicon.png?">

    <!-- CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href='https://fonts.googleapis.com/css?family=Ubuntu:400,300,500' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,300italic,400italic,600,600italic' rel='stylesheet' type='text/css'>
    <link href="/css/libs/font-awesome.min.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

  
<!-- Basic nav -->

<nav id="mainnav" class="navbar navbar-default navbar-fixed-top">
  <div class="container">

    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand" href="/index.html"><i class="fa fa-bug" aria-hidden="true"></i> This incident will be reported</a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/blog.html">Adventures in bullshit <i class="fa fa-terminal" aria-hidden="true"></i></a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->

  </div>
</nav>


  <div class="post">

    <div class="container push">
      <div class="row">

        <div class="col-sm-9">
          <h1 id="swinging-shit-through-aws-s3">Swinging shit through AWS S3</h1>

<p>I know all of you are laughing since you have been able to do this since, like Y2K or something. But not me. Since I really don’t like anything, I probably won’t like this - and drop it later once I get a bill for like a million dollars.</p>

<hr />
<hr class="rule" />

<h2 id="cat-pictures">Cat pictures</h2>

<p>Sure, I guess you can just make a bucket and just open it up to the world. But the higher ups at Amazon says it’s a <a href="https://aws.amazon.com/articles/5050">no-no</a>. So, one way to do it is to spin up a “website” and serve your stuff from a public folder.</p>

<p>See the utterly inspiring post <a href="http://herebyaccident.com/post/2016/04/05/aws-s3.html">here</a> about it. I just work up a whatever.com and use the S3 endpoint once it’s all up to speed. You will have to go through the trouble of making a dummy index.html and 404.html page. I know you are lazy, so here is the bucket policy once again.</p>

<pre>
{
  "Version":"2012-10-17",
  "Statement":[{
	"Sid":"PublicReadForGetBucketObjects",
        "Effect":"Allow",
	  "Principal": "*",
      "Action":["s3:GetObject"],
      "Resource":["arn:aws:s3:::fucktheweb.com/*"
      ]
    }
  ]
}
</pre>

<p>Now you can just link out to “https://s3.amazonaws.com/fucktheweb.com/lamepost/super-cat.jpg”.</p>

<hr />
<hr class="rule" />

<h2 id="font-wizardry">Font wizardry</h2>

<p>Not so fast. Apparently AWS is so damn awesome you can’t just serve up your souped up comic sans font you stole from napster in the 90’s. Firefox gets all jittery about it. So <em>now</em> you have to use some BS called CORS. Or to be cool when you are around the big developers it’s called “Cross-Origin Resource Sharing.”</p>

<p>So jump through the following hoop:</p>

<ul>
  <li>Select your “root” bucket</li>
  <li>Select Properties</li>
  <li>Select Permissions</li>
  <li>Select Edit CORS Configuration</li>
  <li>
    <p>Check that is says this:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"&gt;
  		&lt;CORSRule&gt;
  		&lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;
  		&lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;
  		&lt;MaxAgeSeconds&gt;3000&lt;/MaxAgeSeconds&gt;
  		&lt;AllowedHeader&gt;Authorization&lt;/AllowedHeader&gt;
  		&lt;/CORSRule&gt;
  &lt;/CORSConfiguration&gt;
</code></pre>
    </div>
  </li>
</ul>

<p>Generally, you can use the default for this. For my deal I used the <code class="highlighter-rouge">&lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;</code> or the * setting to use all URL’s instead of a specific one.</p>

<p>So, now you should be able to hook up your fonts like so:</p>

<pre>
@font-face {
  font-family: KillerComicSans;
  src: url('https://s3.amazonaws.com/fucktheweb.com/lamepost/fonts/KillerComicSans.eot');
  src: url('https://s3.amazonaws.com/fucktheweb.com/lamepost/fonts/KillerComicSans.eot?#iefix') format('embedded-opentype'),
       url('https://s3.amazonaws.com/fucktheweb.com/lamepost/fonts/KillerComicSans.woff') format('woff'),
       url('https://s3.amazonaws.com/fucktheweb/lamepost/fonts/KillerComicSans.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

body {
  font-family: 'KillerComicSans', sans-serif;
}
</pre>

<hr />
<hr class="rule" />

<h2 id="cli-terror">CLI Terror</h2>

<p>So there is a CLI tool where you can fuck up your machine. Which I probably already have. So at this point I’m going to just “copy” stuff instead of snycing it. Cause you know, it may remove everything that isn’t snyced to S3.</p>

<p>I also suck at paths - so I like to <strong>nav to the folder I want to copy to first</strong>. To copy everything from an s3 bucket you can do this mojo.</p>

<p>Like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>aws s3 cp s3://bucket-name . --recursive
</code></pre>
</div>

        </div>

        <div class="col-sm-3 sidenav">
          <h3>No such process</h3>
          <hr class="heading">
          <ul>
            
            <li>
              <a href="/post/2016/12/16/firebase.html">Jekyll Firebase hosting</a>
            </li>
            
            <li>
              <a href="/post/2016/09/30/wp-abyss.html">Wordpress and the abyss</a>
            </li>
            
            <li>
              <a href="/post/2016/09/29/js-hair-pulling.html">JS hair pulling</a>
            </li>
            
            <li>
              <a href="/post/2016/08/29/drupal-clusterfuck.html">Drupal clusterfuck</a>
            </li>
            
            <li>
              <a href="/post/2016/08/26/AWS-S3-resource-sharing.html">AWS S3 resource sharing</a>
            </li>
            
            <li>
              <a href="/post/2016/05/12/prose-configure.html">Github pages prose.io config</a>
            </li>
            
            <li>
              <a href="/post/2016/04/28/simple-sass.html">Basic SASS</a>
            </li>
            
            <li>
              <a href="/post/2016/04/28/git-cheat-sheet.html">git cheat sheet</a>
            </li>
            
            <li>
              <a href="/2016/04/20/simple-xml-sitemap.html">XML simple sitemap</a>
            </li>
            
            <li>
              <a href="/post/2016/04/20/jekyll-site-hosted-on-github.html">Jekyll github pages hosting</a>
            </li>
            
            <li>
              <a href="/2016/04/20/common-analytics-settings.html">Analytics starter settings</a>
            </li>
            
            <li>
              <a href="/2016/04/18/youtube-custom-transcriptions.html">Youtube custom transcriptions</a>
            </li>
            
            <li>
              <a href="/2016/04/18/aws-ec2-easy-engine.html">AWS EC2 LEMP stack</a>
            </li>
            
            <li>
              <a href="/2016/04/15/vagrant-scotchbox.html">Vagrant Scotchbox LAMP stack</a>
            </li>
            
            <li>
              <a href="/2016/04/15/open-vpn-el-capitan-bug.html">Open VPN El Capitan bug</a>
            </li>
            
            <li>
              <a href="/post/2016/04/15/common-css.html">Common CSS</a>
            </li>
            
            <li>
              <a href="/2016/04/05/global-git-ignore.html">Global .gitignore</a>
            </li>
            
            <li>
              <a href="/post/2016/04/05/basic-linux-commands.html">Linux basics</a>
            </li>
            
            <li>
              <a href="/post/2016/04/05/aws-s3.html">AWS S3 Static Setup</a>
            </li>
            
            <li>
              <a href="/2016/04/05/OSX-setup.html">OSX setup</a>
            </li>
            
            <li>
              <a href="/2016/04/04/markdown.html">Markdown / Kramdown</a>
            </li>
            
          </ul>
        </div>

      </div>
    </div>

  </div>

  
<footer>

  <div class="container">
    <div class="row">
      <div class="col-sm-12">

      <hr>
      <p class="text-center">It's 2017 in case you live on the moon.</p>

      </div>
    </div>
  </div>

</footer><!-- footer -->


  <!-- JS -->


</body>
