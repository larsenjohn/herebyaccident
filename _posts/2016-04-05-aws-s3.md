---
layout: post
title: AWS S3 Static
---

# Configure a static site through AWS S3

***

I heard you can host a static site on Amazon S3. Not only is this unnecessary and convoluted to adopt, but you have to go through and learn the special "Amazon way" of doing it. There are also super dense third party tools to automate this process because they want it to be infinitely more complicated.

It's super cheap though. That is until you get a bill that says it isn't. Doesn't matter, since Amazon already has your credit card on file so you will pay either way.

The whole [sad state of affairs is here to read.](http://docs.aws.amazon.com/AmazonS3/latest/dev/HostingWebsiteOnS3Setup.html)

So let's get going shall we?

<br>

<hr>

## Make Three Buckets

The site will need three instances. root, www, and logs. Create a bucket for each with the exact domain name.

For instance:  

+ fucktheweb.com
+ www.fucktheweb.com
+ logs.fucktheweb.com

<br>

Enable the root site *fucktheweb.com* for web hosting. Go to the **Properties** panel, click **Static Website Hosting**, and do the following:

1. Select the **Enable website hosting**.
2. In the **Index Document** box, add index.html.
3. In the **Error Document** box, add 404.html.

<br>

## Make the root public

In the *fucktheweb.com* bucket **Properties** panel, click the **Permissions**.

1. Click Add **Bucket Policy**.
2. Drop this puppy in

<pre>
{
  "Version":"2012-10-17",
  "Statement":[{
	"Sid":"PublicReadForGetBucketObjects",
        "Effect":"Allow",
	  "Principal": "*",
      "Action":["s3:GetObject"],
      "Resource":["arn:aws:s3:::fucktheweb.com/*"
      ]
    }
  ]
}
</pre>

<br>

## Set up the redirect

In the *www.fucktheweb.com* bucket **Properties** go to **Static Website Hosting**.

1. Select **Redirect all requests to another host name**
2. **Redirect all requests to:** fucktheweb.com

<br>

## Set up logging

In the *logs.fucktheweb.com* bucket, create a folder named "root".

In the *fucktheweb.com* bucket **Properties** panel, click **Logging**.

1. Check **Enable logging**.
2. **Target bucket:** logs.fucktheweb.com
3. **Target prefix:** root/

<hr>

# Point the domain

Well, that was fun. Now we get to go through another super groovy interface that costs more money. It's Amazon's signature "Route 53" and we need to set up a "hosted zone".
