---
layout: post
category: post
title: Wordpress and the abyss
published: true
---

# Wordpress and the black abyss #

Sure, you learned PHP while you were asleep. I didn't.

Wordpress is what my nightmares are made of, so I don't sleep much.

<hr class="rule">
***

## load JS/CSS through functions.php (child) ##

For instance, if you were lazy like me and are crippled by Bootstrap.

	// Bootstrap Support
	function bootstrap() {
    
    	wp_enqueue_script( 'bootstrap-js', get_stylesheet_directory_uri() . '/js/bootstrap.min.js', array( 'jquery' ));
    	wp_enqueue_style( 'bootstrap-css', get_stylesheet_directory_uri() . '/css/bootstrap.min.css' );
	}

	add_action( 'wp_enqueue_scripts', 'bootstrap' );
    
So to walk through this: 

+ start with defining your fancy new function. `function something() {`. The "something" being whatever you want to name your function.
+ Next `wp_enqueue_script( 'bootstrap-js',` Load the script with another name of your choosing.
+ `get_stylesheet_directory_uri() .` This tells WP to get the file from the child theme directory
+ `'/js/bootstrap.min.js', array( 'jquery' ));` This is the path to wherever you put the file. The array tells WP it's 'jquery', but I'm not sure if that's a necessity.
+ `add_action( 'wp_enqueue_scripts', 'bootstrap' );` Then tell WP to add your fancy new function.
    
Fascinating huh? **Watch out for the `get_stylesheet_directory_uri()`. That's for the child theme.** If you are saucy and using *_S* You will want to load it like so: `get_template_directory_uri()`, since Underscores is the template.

	function fucktheweb_scripts() {

		wp_enqueue_style( 'bootstrap-css', get_template_directory_uri() . '/css/bootstrap.min.css' );
		wp_enqueue_style( 'font-awesome', get_template_directory_uri() . '/css/font-awesome.min.css' );

		/** main styles **/
		wp_enqueue_style( 'fucktheweb-style', get_stylesheet_uri() );

		wp_enqueue_script( 'fucktheweb-navigation', get_template_directory_uri() . '/js/navigation.js', array(), '20120206', true );
		wp_enqueue_script( 'fucktheweb-skip-link-focus-fix', get_template_directory_uri() . '/js/skip-link-focus-fix.js', array(), '20130115', true );

		/** set jquery arrary for bootstrap js **/
		wp_enqueue_script( 'bootstrap-js', get_template_directory_uri() . '/js/bootstrap.min.js', array( 'jquery' ), '3.1.1', true );

		if ( is_singular() && comments_open() && get_option( 'thread_comments' ) ) {
		wp_enqueue_script( 'comment-reply' );
		}
	}
    
	add_action( 'wp_enqueue_scripts', 'fucktheweb_scripts' );
    
 This one has a bunch of BS in it as well. It worked once, but maybe not anymore.
 
***
***

## Load a custom menu ##

This is oddly not that difficult. First, you will need to go into the functions.php file and drop in this not-so-bad boy. This works just dandy for your **child theme**.

	//** Load custom menus **/

	function register_my_menus() {
  	register_nav_menus(
    		array(
      		'new-menu' => __( 'Custom Shit' ),
      		'social-menu' => __( 'Social Shit' ),
    		)
  		);
	}
	add_action( 'init', 'register_my_menus' );
        
To dissect this, you are setting up the function 'register_my_menus', with the array of 'new-menu', and it will display on the Wordpress back end as the 'Custom Shit' menu in the menus section. And so on. Once it's all done it adds the action of 'register_my_menus'.

Then to display it in the template - you drop in this code. In this instance, there is the added 'container_class' which gives you handy container class for CSS.

	<?wp_nav_menu( array( 'theme_location' => 'new-menu', 'container_class' => 'custom-shit' ) ); ?>
	<?wp_nav_menu( array( 'theme_location' => 'social-menu', 'container_class' => 'social-shit' ) ); ?>
        
If multiple menus ain't your bag you can just do a singe one like so.

	function register_my_menu() {
		register_nav_menu('new-menu',__( 'Custom Shit' ));
	}
	add_action( 'init', 'register_my_menu' );
        
Then just add the single line to the template wherever. Bada bing bada boom.

	<?wp_nav_menu( array( 'theme_location' => 'new-menu', 'container_class' => 'custom-shit' ) ); ?>
        
***
***

## Wanna install in a subfolder? ##

Maybe you are lazy or can't make a subdomain and want two installs for staging or something. Seems like you can just make a subfolder and drop the whole install in there, right? Wrong bozo! This will fuck up your permalink structure.

But, you can do a little workaround with the .htaccess file. Install it in the subfolder like usual, make sure you have your .htaccess file in the subfolder and change it from...
	
    # I'm the original .htaccess
    
    # BEGIN WordPress
	<IfModule mod_rewrite.c>
	RewriteEngine On
	RewriteBase /
	RewriteRule ^index\.php$ – [L]
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d
    # Lookie here!!
	RewriteRule . /index.php [L]
	</IfModule>
	# END WordPress


to:

	# I'm the new .htaccess
    
    # BEGIN WordPress
	<IfModule mod_rewrite.c>
	RewriteEngine On
	RewriteBase /
	RewriteRule ^index\.php$ – [L]
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d
    # I'm the new path
	RewriteRule . /fuckit/index.php [L]
	</IfModule>
	# END WordPress

***
***

## Tired of assholes poking around in your directories? ##

Just go to /wp-content/uploads/ and you'll know what I mean. Some hosts do this automagically, some don't. I have *no* idea why so don't ask me. So the answer is again in the old .htaccess file and add `Options -Indexes`.

	# I'm an .htaccess example, yo.
    
    # BEGIN WordPress
	<IfModule mod_rewrite.c>
	RewriteEngine On
	RewriteBase /
	RewriteRule ^index\.php$ – [L]
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteRule . /index.php [L]
	</IfModule>
    
    # Don't look in my drawers, chump.
    
    Options -Indexes
    
	# END WordPress
    
 ***
 ***


## Browser caching ##
 
I fucking hate Google. Sooner or later some asshole will want you follow their Page Speed *insights* and you will want to kill yourself. One part of the noose knot will be to "leverage browser caching". So - you think that using the "wp super cache" might do that right? Given that it has "cache" right in the fucking name. 

Wrong bozo!. The super cache spits out your Wordpress files into plain old HTML/CSS/JS instead of constantly digging into the database. This *may* make you wonder why your are using Wordpress at all for your 3 page site, but I digest...

.htaccess again.

	# Put me at the bottom.
    
    # BEGIN EXPIRES

    ExpiresActive On
    ExpiresDefault "access plus 10 days"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType text/plain "access plus 1 month"
    ExpiresByType image/svg+xml "access 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType application/x-javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType application/x-icon "access plus 1 year"

	# END EXPIRES

Of course, this will bit you in the ass when you are updating. And will most likely fuck your client unless they flush the cache. So when you update substantial shit - you will need to switch it over to `access 15 minutes` or so.

***
***
